!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,t,i){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=6)}([function(e,t,i){var n,s;n=i(2);var a=i(4);s=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(s=n=n["default"]),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,e.exports=n},function(e,t,i){var n,s;n=i(3);var a=i(5);s=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(s=n=n["default"]),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,e.exports=n},function(e,t,i){"use strict";t["default"]={props:["channel","messages","members"],data:function(){return{message:""}},methods:{send:function(){var e=this.message;this.$http.post("/chat/message",{channel:this.channel,message:e}),this.$parent.talks[this.channel].messages.push({content:e,type:"sent"}),this.message=""}},watch:{messages:function(){$("#"+this.channel+" .messagebox").stop().animate({scrollTop:$("#"+this.channel+" .messagebox")[0].scrollHeight},800)}},mounted:function(){var e=this;$("#"+e.channel).dialog({height:500,width:500,close:function(t,i){e.$parent.privateExit(e.channel)}}).dialogExtend({closable:!0,maximizable:!0,minimizable:!0,collapsable:!1,dblclick:"minimize",titlebar:!1,minimizeLocation:"left",icons:{close:"fa fa-window-close fa-fw",maximize:"fa fa-window-maximize fa-fw",minimize:"fa fa-window-minimize fa-fw",restore:"fa fa-window-restore fa-fw"},load:function(e,t){$(".ui-dialog-titlebar-minimize span").text(""),$(".ui-dialog-titlebar-maximize span").text(""),$(".ui-dialog-titlebar-restore span").text(""),$(".ui-dialog-titlebar-minimize").attr("title","Minimalizuj"),$(".ui-dialog-titlebar-maximize").attr("title","Maksymalizuj"),$(".ui-dialog-titlebar-restore span").attr("title","Przywróć"),$(".ui-dialog-titlebar-close").attr("title","Zamknij")}}),setInterval(function(){var t=new Date,i="Godzina: "+t.getHours()+":"+t.getFullMinutes();"undefined"!=typeof e.$parent.talks[e.channel]&&e.$parent.talks[e.channel].messages.push({content:i,type:"info"})},3e5),Date.prototype.getFullMinutes=function(){return this.getMinutes()<10?"0"+this.getMinutes():this.getMinutes()}}}},function(e,t,i){"use strict";t["default"]={props:["user","self"],methods:{invite:function(e){this.$emit("invite")}}}},function(module,exports){module.exports={render:function(){with(this)return _c("div",{staticStyle:{position:"relative"},attrs:{id:channel,title:members.guest.nick}},[_c("div",{staticClass:"flexbox"},[_c("div",{staticClass:"flexrow content messagebox"},_l(messages,function(e){return _c("div",["received"==e.type?_c("span",{staticClass:"message-received-photo"},[members.guest.photo?_c("img",{attrs:{src:"photos/mini/"+members.guest.photo,alt:"Zdjęcie "+members.guest.nick}}):_e(),_v(" "),members.guest.photo||0!=members.guest.gender?_e():_c("img",{attrs:{src:"images/avatar_male_mini.png",alt:"Zdjęcie "+members.guest.nick}}),_v(" "),members.guest.photo||1!=members.guest.gender?_e():_c("img",{attrs:{src:"images/avatar_female_mini.png",alt:"Zdjęcie "+members.guest.nick}})]):_e(),_v(" "),"sent"==e.type?_c("span",{staticClass:"message-sent-photo"},[members.me.photo?_c("img",{attrs:{src:"photos/mini/"+members.me.photo,alt:"Zdjęcie "+members.me.nick}}):_e(),_v(" "),members.me.photo||0!=members.me.gender?_e():_c("img",{attrs:{src:"images/avatar_male_mini.png",alt:"Zdjęcie "+members.me.nick}}),_v(" "),members.me.photo||1!=members.me.gender?_e():_c("img",{attrs:{src:"images/avatar_female_mini.png",alt:"Zdjęcie "+members.me.nick}})]):_e(),_v(" "),_c("span",{"class":"message-"+e.type},[_v(_s(e.content))])])})),_v(" "),_c("div",{staticClass:"flexrow footer"},[_c("form",{on:{submit:function(e){e.preventDefault(),send(e)}}},[_c("div",{staticClass:"input-group"},[_c("input",{directives:[{name:"model",rawName:"v-model",value:message,expression:"message"}],staticClass:"form-control",attrs:{type:"text",name:"message",placeholder:"Wiadomość...",required:""},domProps:{value:_s(message)},on:{input:function(e){e.target.composing||(message=e.target.value)}}}),_v(" "),_m(0)])])])])])},staticRenderFns:[function(){with(this)return _c("span",{staticClass:"input-group-btn"},[_c("button",{staticClass:"btn btn-default",attrs:{type:"sumbit"}},[_c("i",{staticClass:"fa fa-send"})])])}]}},function(module,exports){module.exports={render:function(){with(this)return _c("div",{staticClass:"user-panel"},[user.gender?_c("i",{staticClass:"fa fa-female gender",attrs:{"aria-hidden":"true"}}):_c("i",{staticClass:"fa fa-male gender",attrs:{"aria-hidden":"true"}}),_v(" "),user.photo?_c("div",{staticClass:"photo"},[_c("img",{attrs:{src:"photos/thumbs/"+user.photo,alt:"Zdjęcie użytkownika "+user.nick}})]):_e(),_v(" "),_c("h3",{staticClass:"nick"},[_c("strong",[_v(_s(user.nick))]),_v(" "),user.age?_c("span",[_v("("+_s(user.age)+")")]):_e()]),_v(" "),user.region?_c("div",{staticClass:"region"},[_c("i",{staticClass:"fa fa-map-marker fa-fw"}),_v(" "),_c("span",[_v(_s(user.region))])]):_e(),_v(" "),user.interests?_c("div",{staticClass:"interests"},_l(user.interests,function(e,t){return _c("span",[_v(_s(e))])})):_e(),_v(" "),user.about?_c("div",{staticClass:"about"},[_v("\n        "+_s(user.about)+"\n    ")]):_e(),_v(" "),self!=user.id?_c("div",[_c("hr"),_v(" "),_c("button",{staticClass:"btn btn-default btn-block",on:{click:invite}},[_v("Porozmawiaj")])]):_e()])},staticRenderFns:[]}},function(e,t,i){function n(e,t){return e>t?"priv-"+e+"-"+t:e<t?"priv-"+t+"-"+e:void 0}function s(e,t,i,n){var s=e.map(function(e){return e.id}).indexOf(i),a=e.map(function(e){return e.id}).indexOf(n);return t==i?{me:e[s],guest:e[a]}:t==n?{me:e[a],guest:e[s]}:void 0}function a(e,t){var i=!0,n=!0,s=!0,a=e.age>=t.age_min,r=e.age<=t.age_max,o=!0,c=!0,u=!0,l=!0;return""!=t.nick&&(i=e.nick.toLowerCase().includes(t.nick.toLowerCase())),$.isArray(t.region)&&t.region.length&&(n=_.indexOf(t.region,e.region)!=-1),$.isArray(t.interests)&&t.interests.length&&($.isArray(e.interests)&&e.interests.length?(s=!1,$.each(e.interests,function(e,i){var n=_.indexOf(t.interests,i)!=-1;n&&(s=!0)})):s=!1),14==t.age_min&&70==t.age_max&&(a=!0,r=!0),c=t.male?0==e.gender:1==e.gender,o=t.female?1==e.gender:0==e.gender,t.male&&t.female&&(o=!0,c=!0),t.photo&&(u=""!=e.photo&&null!=e.photo),t.about&&(l=""!=e.about&&null!=e.about),i&&n&&s&&a&&r&&o&&c&&u&&l}function r(e){window.setTimeout(function(){$(".alert").fadeTo(500,0).slideUp(500),e&&$(".delAfterAlert").fadeTo(500,0).slideUp(500)},3e3)}Vue.component("user",i(1)),Vue.component("talk",i(0)),Vue.component("isotope",window.vueIsotope),Vue.directive("imagesLoaded",window.imagesLoaded);var o=new Vue({el:"#chat",data:{user_id:null,users:[],talks:{},nobody:!1,filters:{}},methods:{echoGlobal:function(){var e=this;Echo.join("presence").here(function(t){e.users=t}).joining(function(t){e.users.push(t)}).leaving(function(t){var i=e.users.map(function(e){return e.id}).indexOf(t.id);e.users.splice(i,1)}).listen("InvitationEvent",function(t){e.privateConnect(t.sender,t.recipient)})},echoPrivate:function(e,t,i){var n=this;Echo.join(e).joining(function(t){n.talks[e].messages.push({content:"Dołączył: "+t.nick,type:"info"})}).leaving(function(t){n.talks[e].messages.push({content:"Opuścił: "+t.nick,type:"info"})}).listen("MessageEvent",function(s){n.privateOpen(t,i),n.talks[e].messages.push({content:s.message,type:"received"})})},eventInvite:function(e,t){return e!=t&&(this.privateConnect(e,t),this.privateOpen(e,t),void this.$http.post("/chat/invite",{sender:e,recipient:t}))},privateConnect:function(e,t){var i=n(e,t);this.echoPrivate(i,e,t)},privateOpen:function(e,t){var i=n(e,t),a=s(this.users,this.user_id,e,t);e!=this.user_id&&t!=this.user_id||this.talks[i]||this.$set(this.talks,i,{messages:[],members:a})},privateExit:function(e){Echo.leave(e),this.$delete(this.talks,e)},sort:function(e){this.$refs.grid.sort(e)},filter:function(e){var t=this;this.filters=e,this.$refs.grid.filter("filter"),setTimeout(function(){t.nobody=0==$(".grid .user:visible").length},400)},layout:function(){this.$refs.grid.layout("masonry")},isotopeOptions:function(){var e=this;return{sortBy:"by_nick",getSortData:{by_nick:function(e){return e.nick.toLowerCase()},by_age:function(e){return e.age}},getFilterData:{filter:function(t){return a(t,e.filters)}}}}},mounted:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),this.user_id=$('meta[name="user-id"]').attr("content"),this.echoGlobal()}}),c=new Vue({el:"#filters",data:{sorting:"by_nick",filters:{nick:"",region:[],interests:[],age_min:14,age_max:70,female:!0,male:!0,photo:!1,about:!1},age_min:14,age_max:70},methods:{changeSorting:function(){o.sort(this.sorting)},setFilters:function(){this.filters.age_min=this.age_min,this.filters.age_max=this.age_max,o.filter(this.filters)},setMale:function(){this.filters.male=!this.filters.male,o.filter(this.filters)},setFemale:function(){this.filters.female=!this.filters.female,o.filter(this.filters)},setPhoto:function(){this.filters.photo=!this.filters.photo,o.filter(this.filters)},setAbout:function(){this.filters.about=!this.filters.about,o.filter(this.filters)}}}),u=new Vue({el:"#profile",data:{reserved:!1,changed:!1,updated:!1},methods:{update:function(e){var t=this;Echo.leave("presence"),$(e.target).valid()&&this.$http.post("/chat/update",new FormData(e.target)).then(function(e){t.changed=!e.ok,t.updated=e.ok,r(!1),o.echoGlobal()})},change:function(){this.changed=!0,this.updated=!1},reserve:function(e){var t=this;$(e.target).valid()&&this.$http.post("/chat/reserve",new FormData(e.target)).then(function(e){t.reserved=e.ok,r(!0)})}},mounted:function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}})}});$(function(){$(".age-range").slider({range:!0,min:14,max:70,values:[14,70],slide:function(e,t){$(".age-min").text(t.values[0]),$(".age-max").text(t.values[1]),Vue.set(c,"age_min",t.values[0]),Vue.set(c,"age_max",t.values[1]),c.setFilters()}});var e;e=$(".age-input").val()>0?$(".age-input").val():null,$(".age-profile").slider({min:14,max:70,value:e,create:function(){e?($(".age-handle").html(e+' <i class="fa fa-times"></i>'),$(".age-profile .fa").click(function(){$(".age-handle").text("Wiek"),$(".age-input").val(""),u.change()})):($(".age-handle").text("Wiek"),$(".age-input").val(""))},slide:function(e,t){$(".age-handle").html(t.value+' <i class="fa fa-times"></i>'),$(".age-input").val(t.value),u.change(),$(".age-profile .fa").click(function(){$(".age-handle").text("Wiek"),$(".age-input").val(""),u.change()})}})}),$(function(){$(".button-checkbox").each(function(){function e(){var e=s.is(":checked");n.data("state",e?"on":"off"),n.find(".state-icon").removeClass().addClass("state-icon "+a[n.data("state")].icon)}function t(){e(),0==n.find(".state-icon").length&&n.prepend('<i class="state-icon '+a[n.data("state")].icon+'"></i> ')}var i=$(this),n=i.find("button"),s=i.find("input:checkbox"),a={on:{icon:"fa fa-check-square-o fa-fw"},off:{icon:"fa fa-square-o fa-fw"}};n.on("click",function(){s.prop("checked",!s.is(":checked")),s.triggerHandler("change"),e()}),s.on("change",function(){e()}),t()})})}]);